---
title: "AdsP 상관계수, 다차원척도법, 주성분분석"
output: html_notebook
---

### 1. 상관분석
상관분석은 데이터 안의 두 변수 간의 관련성을 파악하는 방법이다. 이를 측정하는 방법에는 피어슨 상관계수, 스피어만 상관계수, 켄달의 순위상관계수 등이 있다. 흔히 상관계수라고 하면 피어슨 상관계수를 뜻한다. 

해석: 부호는 관계의 방향. 절대값은 관계의 정도

피어슨 상관계수와 스피어만 상관계수의 차이

1. 피어슨 상관계수: 두 변수 간의 선형관계의 크기를 측정하는 값. 비선형관계는 나타내지 못한다. 연속형 변수만 가능. 예) 국어 점수와 영어 점수 와의 상관계수

2. 스피어만 상관계수: 두 변수 간의 비선형적 관계도 나타낼 수 있다. 연속형 외에 이산형 순서형도 가능. 예) 국어성적 석차와 영어성적 석차의 상관계수


### 2. 다차원 척도법 MDS, Multidimensional Scaling
다차원척도법은 개체들 사이의 유사성/비유사성을 측정하여 2차원 또는 3차원 공간상에 표현하는 분석 방법으로 개체들 간의 근점성을 시각화하여 데이터 속에 잠재해 있는 패턴이나 구조를 찾아내는 통계기법이다.

```{r}
loc <- cmdscale(eurodist)
loc
```

```{r}
x <- loc[,1]
y <- loc[,2]
plot(x,y,type= "p", pch= 20, main = "eurodist")
text(x,y,rownames(loc), cex = .8, col = "red")
abline(v = 0, h = 0)
```

다차원척도법은 유사성 지각에 관한 정보들을 시각적으로 표시하여, 유사성 지각의 토대가 된 차원들을 추정하는 기법이다. 차원의 수가 많을수록 추정의 적합도가 높아지지만 해석이 어려워지므로 일반적으로 두 개 차원의 지각도를 작성하게 된다. 또한 다차원척도법에서의 유사성 계산은 Euclidean 거리로 한다. 


### 3. 주성분분석 PCA, Principal Component Analysis
주성분 분석은 데이터에 많은 변수가 있을 때 변수의 수를 줄이는 차원 감소 기법 중 하나이다. 데이터에서 패턴을 찾는 도구 중 하나이며, 상관관계가 있는 변수들을 선형 결합하여 변수를 축약하는 기법이기도 하다. 즉 변수들 간에 내재하는 상관관계 및 연관성을 이용해 소수의 주성분으로 차원을 축소하는 분석 기법이다. 변수간 상화작용을 알아내 하원을 축소.

PCA는 데이터 하나 하나에 대한 성분을 분석하는 것이 아니라, 여러 데이터들이 모여 하나의 분포를 이룰 때 이 분포의 주 성분을 분석해 주는 방법이다. 여기서 주성분이라 함은 그 방향으로 데이터들의 분산이 가장 큰 방향벡터를 의미한다.

![](/Users/bogangjun/Desktop/Rmdfigures/PCA.png)

주성분분석의 결정기준: 가장 중요한 포인트는 주성분을 몇 개까지 고를 지 결정해야 한다는 것

1. 성분들이 설명하는 분산의 비율: 누적 비율을 확인하면 주성분들이 설명하는 전체 분산 양을 알 수 있다. 허용 수준은 연구에 따라 다르지만 주성분들이 설명하는 총 분산의 비율이 70-90% 사이가 되는 주성분의 갯수를 선택한다. 

2. 고유값 Eigenvalue: 고유값의 크기를 사용하여 주성분 수를 결정할 수 있다. Kaiser 기준을 사용하는 경우 고유값이 1보다 큰 주성분만 사용한다.

3. Scree plot: Scree 그림은 고유값을 가장 큰 값에서 가장 작은 값의 순서로 정렬한다. 주성분 분산의 감소가 급격하게 줄어들어 줏ㅇ분의 갯수를 늘릴 때 얻게 되는 정보의 양이 상대적으로 미미한 지점에서 주성분 갯수를 정한다. 

```{r}
#library(datasets)
data("USArrests")
head(USArrests)
```
```{r}
fit <- prcomp(USArrests, scale. = TRUE)
summary(fit)
```
첫번째 주성분 하나가 전체 분산의 62%를 설명하고 있음을 알 수 있다. 첫번째 주성분만을 수용했을 때 정보손실은 (100-62 =) 38%라는 것을 알 수 있다.
```{r}
fit$rotation
```
첫 번째 주성분은 $Y1 = -0.536 Murder =0.583 Assault - 0.278 UrbanPop - 0.54 Rape$ 라는 것을 알 수 있음

```{r}
plot(fit, type = "lines")
```
고유값eigen value이 1보다 크면 하나의 요인이 변수 1개 이상의 분산을 설명한다는 의미. 1보다 작다면 요인으로서 의미가 없다는 뜻. 위의 경우 1을 넘는 고유값이 1개

참고) 주성분분석PCA과 요인분석Factor Analysis는 비슷하지만 서로 다른 개념. 

```{r}
biplot(fit) # 제 1, 제 2 주성분만을 그린 그림 각 벡터 방향의 도시들이 범죄율이 좊다는 것을 의미. UrbanPop 벡터 방향의 도시가 인구비율이 높다는 의미
```




